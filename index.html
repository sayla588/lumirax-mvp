<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lumirax MVP</title>
  <style>
    body { font-family: Arial; margin: 0; background: #f0f7ff; display: flex; flex-direction: column; height: 100vh; }
    header { text-align: center; padding: 14px; background: #ffffffcc; backdrop-filter: blur(8px); font-size: 20px; font-weight: bold; }
    nav { display: flex; justify-content: center; gap: 12px; background: #fff; padding: 10px; }
    nav button { padding: 8px 16px; border-radius: 8px; border: 1px solid #bbb; cursor: pointer; font-size: 15px; }
    nav button.active { background: #0078ff; color: white; border: none; }
    #chatBox { flex: 1; overflow-y: auto; padding: 20px; }
    .bubble { padding: 12px 16px; margin: 10px 0; border-radius: 13px; max-width: 75%; }
    .me { background: #8ec5ff; color: white; margin-left: auto; }
    .bot { background: #ffffffd5; color: #222; margin-right: auto; }
    #inputBar { display: flex; padding: 10px; background: #fff; }
    #msgInput { flex: 1; font-size: 17px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; }
    button.send { margin-left: 10px; padding: 10px 20px; border: none; background: #0077ff; color: white; border-radius: 8px; cursor: pointer; }
  </style>
</head>
<body>

<header>âœ¨ Lumirax â€” Web3 + AI å®‰å…¨å®ˆæŠ¤ âœ¨</header>

<nav>
  <button id="tabChat" class="active" onclick="switchTab('chat')">ğŸ’¬ AI èŠå¤©</button>
  <button id="tabRisk" onclick="switchTab('risk')">ğŸ›¡ Base é’±åŒ…é£é™©æ£€æµ‹</button>
</nav>

<div id="chatBox"></div>

<div id="inputBar">
  <input id="msgInput" type="text" placeholder="è¾“å…¥å†…å®¹..." />
  <button class="send" onclick="sendMessage()">å‘é€</button>
</div>

<script>
  const DEEPSEEK_KEY = "AIzaSyDf87pvSYb3x43drPcdMy4r7Nhp0cj5kPI"; // â† æ›¿æ¢æˆä½ çš„ DeepSeek API Key
  let currentTab = "chat";

  const chatBox = document.getElementById("chatBox");
  const input = document.getElementById("msgInput");

  function addBubble(text, sender) {
    const div = document.createElement("div");
    div.className = "bubble " + sender;
    div.innerText = text;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function switchTab(tab) {
    currentTab = tab;
    document.getElementById("tabChat").classList.toggle("active", tab === "chat");
    document.getElementById("tabRisk").classList.toggle("active", tab === "risk");

    chatBox.innerHTML = "";
    input.value = "";

    if (tab === "chat") {
      addBubble("ä½ å¥½ï¼Œæˆ‘æ˜¯ Lumirax AIï¼Œéšæ—¶é™ªä½ èŠå¤© ğŸŒ™", "bot");
    } else {
      addBubble("è¯·è¾“å…¥ Base é’±åŒ…åœ°å€ï¼Œæˆ‘å°†åˆ†æé’±åŒ…é£é™© ğŸ›¡", "bot");
    }
  }

  async function sendMessage() {
    const msg = input.value.trim();
    if (!msg) return;

    addBubble(msg, "me");
    input.value = "";

    addBubble("æ­£åœ¨åˆ†æä¸­â€¦â€¦", "bot");
    const thinking = chatBox.lastElementChild;

    let prompt = "";
    if (currentTab === "chat") {
      prompt = msg;
    } else if (currentTab === "risk") {
      prompt = `ä½ æ˜¯ä¸€å Web3 å®‰å…¨åˆ†æå¸ˆï¼Œè¯·æ·±å…¥åˆ†æ Base é“¾é’±åŒ…é£é™©ï¼Œé’±åŒ…åœ°å€ï¼š${msg}ã€‚æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
      - æ˜¯å¦åœ¨é»‘åå•
      - è¿‡å» 7 å¤©è½¬è´¦æ¨¡å¼
      - æ˜¯å¦æ¶‰åŠå¯ç–‘åˆçº¦
      - è¿‡å¾€ Rug / éª—å±€å†å²
      - é£é™©è¯„çº§ï¼ˆ0-100 åˆ†ï¼‰
      ç”¨ç»“æ„åŒ–æ€»ç»“è¾“å‡ºã€‚`;
    }

    try {
      const res = await fetch("https://api.deepseek.com/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${DEEPSEEK_KEY}`,
        },
        body: JSON.stringify({
          model: "deepseek-chat",
          messages: [{ role: "user", content: prompt }],
        }),
      });
      const data = await res.json();
      thinking.remove();
      addBubble(data.choices?.[0]?.message?.content || "æ²¡æœ‰è¿”å›å†…å®¹", "bot");
    } catch (e) {
      thinking.remove();
      addBubble("âŒ è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ– API Key", "bot");
      console.error(e);
    }
  }

  input.addEventListener("keydown", e => e.key === "Enter" && sendMessage());

  switchTab("chat"); // é»˜è®¤æ˜¾ç¤ºèŠå¤©
</script>

</body>
</html>
